version: "3"
services:
    # frontend:
    #     build:
    #         context: ./frontend
    #         dockerfile: Dockerfile
    #     image: svelte-settlements
    #     container_name: settlemenets-svelte
    #     command: yarn dev --host
    #     ports:
    #         - "5001:5713"
    #        # - "35729:35729"
    #     volumes:
    #         - ./frontend:/app
    #     depends_on:
    #         - backend
    backend:
        build: 
            context: ./backend
            dockerfile: Dockerfile
        image: fastapi-settlements
        container_name: settlements-fastapi
        command: uvicorn app.main:app --host 0.0.0.0 --port 80 --reload
        ports:
            - "8001:80"
        volumes:
            - ./backend/app:/code/app
        depends_on:
            - db
    db:
        image: mongo:latest
        container_name: settlements-mongo
        ports:
        - "27017:27017"
